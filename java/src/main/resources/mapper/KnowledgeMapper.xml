<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.highnes.attractinvestment.mapper.KnowledgeMapper">

    <resultMap type="KnowledgeManage" id="KnowledgeManageResult">
        <result property="id"         column="id"               />
        <result property="knowledgeType"   column="knowledge_type"/>
        <result property="createBy"   column="create_by"        />
        <result property="createDate" column="create_date"      />
        <result property="text"       column="text"             />
        <result property="enclosure"  column="enclosure"        />
    </resultMap>

    <sql id="selectDictDataVo">
        select id, knowledgeType, create_by, create_date, text, enclosure, del_flag
		from knowledge_manage
    </sql>

    <select id="get" resultMap="KnowledgeManageResult">
        <include refid="selectDictDataVo"/>
        <where>
            id = #{id}
        </where>
    </select>

    <select id="findList" resultMap="KnowledgeManageResult">
        <include refid="selectDictDataVo"/>
        <where>
            <if test="knowledgeType != null and knowledgeType != ''">and  knowledge_type like concat('%', #{type}, '%')</if>
        </where>
        order by create_date
    </select>

    <insert id="insert">
        insert into knowledge_manage(
        <if test="knowledgeType != null and knowledgeType != ''">knowledge_type,</if>
        <if test="createBy != null and createBy != ''">create_by,</if>
        <if test="text != null and text != ''">text,</if>
        <if test="enclosure != null and enclosure != ''">enclosure,</if>
        <if test="delFlag != null and delFlag != ''">del_flag,</if>
        create_date
        )values(
        <if test="knowledgeType != null and knowledgeType != ''">#{knowledgeType},</if>
        <if test="createBy != null and createBy != ''">#{createBy},</if>
        <if test="text != null and text != ''">#{text},</if>
        <if test="enclosure != null and enclosure != ''">#{enclosure},</if>
        <if test="delFlag != null and delFlag != ''">#{delFlag},</if>
        sysdate()
        )
    </insert>

    <update id="update">
        update knowledge_manage
        <set>
            <if test="knowledgeType != null and knowledgeType != ''">knowledge_type = #{type},</if>
            <if test="createBy != null and createBy != ''">create_by = #{createBy},</if>
            <if test="text != null and text != ''">text = #{text},</if>
            <if test="enclosure != null and enclosure != ''">enclosure = #{enclosure},</if>
            create_date = sysdate()
        </set>
        where id = #{id}
    </update>

    <update id="delete">
        update knowledge_manage
        set del_flag = #{del_flag}
        where id = #{id}
    </update>



</mapper>